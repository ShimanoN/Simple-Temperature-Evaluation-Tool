# 簡易温度評価ツール - 詳細仕様書（ハードウェア編）

参照元: basic_spec.md  
関連: detailed_spec_sw.md（開発環境・書き込み）

---

## 組み立て手順

所要時間: 約15分  
ハンダ付きは不要です。ワイヤの接続とスタッキングのみです。

### 1. 配線

Proto Module と MAX31855モジュールを オス-メスジャンパワイヤで接続します。  
Proto Module側はメスピン、MAX31855側はオスピンです。

| Proto Module（メス） | ワイヤ色（推奨） | MAX31855（オス） | 役割 |
|---|---|---|---|
| GND | 黒 | GND | グランド |
| 3.3V | 赤 | VCC | 電源 |
| GPIO23 | その他 | SO (MISO) | データ受信 |
| GPIO18 | その他 | SCK | クロック |
| GPIO5 | その他 | CS | チップセレクト |

手順:
1. オス-メスワイヤを5本用意
2. GND同士を接続（黒推奨）
3. Proto Module の 3.3V ↔ MAX31855 の VCC を接続（赤推奨）
4. GPIO23 ↔ SO(MISO) を接続
5. GPIO18 ↔ SCK を接続
6. GPIO5 ↔ CS を接続
7. 全接続を目視確認（特にVCCとGNDの極性）

> ⚠️ MAX31855 の VCC は 3.3V のみ対応です。5Vを接続すると故障します。  
> GND を最初に接続しておくと静電気による破損を防げます。

---

### 2. K型熱電対の接続

1. 熱電対のリード線の色を確認（赤=+、青または黄=-）
2. MAX31855 の T+ 端子に赤リード線を接続（ドライバーでねじ端子を締める）
3. MAX31855 の T- 端子に青/黄リード線を接続
4. 引っ張っても抜けないことを確認

> 熱電対の極性を逆にすると温度がマイナス表示になります。初回確認で気づけるので、まず接続してみてください。

---

### 3. スタッキング

1. M5Stack Basic の USBケーブルを抜く（電源OFF）
2. Proto Module を M5Stack 本体の上部にゆっくり重ねる
3. ピンが全て正しく挿入されているか確認
4. カチッと音がするまで押し込む

---

### 4. 組み立て完了確認

- 全モジュールがしっかり接続されているか目視確認
- 配線に断線・短絡がないか確認
- 熱電対が MAX31855 に正しく接続されているか確認
- USBケーブルを接続し電源を投入
- 画面に「M5Stack」ロゴが表示されることを確認（この時点ではプログラム未書き込み）

---

## 精度確認

書き込み完了後に以下で確認してください。

- 熱電対を室温に置き、5分以上待って温度が安定することを確認
- 市販の温度計と比較し、誤差が ±2℃ 以内であることを確認
- お湯（60〜80℃）に入れて温度上昇を確認（火傷注意）
- お湯から出して温度下降・追従性を確認

---

## 現場運用ガイド

### 測定手順（標準作業）

1. 熱電対を測定対象（チャンバー・金型・槽・ヒーター等）に接触させる
2. 温度表示が安定するまで10秒以上待つ
3. BtnA（左ボタン）を押す → STATE: RUN に遷移
4. 測定したい時間待つ（推奨: 30秒以上）
5. BtnA を押す → STATE: RESULT に遷移、平均値が表示される
6. 平均値を記録（紙またはPC入力）
7. BtnA を押す → STATE: IDLE に戻る
8. 次の測定箇所へ移動

### 測定時の注意事項

- 熱電対は測定対象に確実に接触させる（空気層があると誤差が大きくなる）
- 温度が安定してから計測開始（急変中は避ける）
- 最低30秒以上計測を続ける（サンプル数600以上で統計的に安定）
- M5Stack本体は高温環境（50℃以上）に長時間置かない
- 測定対象が540℃の場合、熱電対ケーブル長（50cm）を活かして本体と十分に距離を取る

### 高温測定時の安全対策（540℃チャンバー対応）

- 熱電対の先端のみをチャンバー内に挿入、M5Stack本体はチャンバー外に設置
- 熱電対ケーブルがチャンバー壁面や高温部に接触しないよう配線経路を確保
- 測定中はケーブルに手を触れない（ケーブル表面も高温になる可能性あり）
- 長時間測定（10分以上）の場合、本体温度が40℃を超えたら休止
- 測定終了後、熱電対を取り出す際は耐熱手袋を着用

---

## 保守・メンテナンス

| 頻度 | 内容 |
|---|---|
| 使用毎 | 画面に「nan」や「ERROR」が表示されていないか確認 |
| 週1回 | 配線の断線・接触不良を目視確認 |
| 月1回 | 熱電対の接点の酸化・劣化を確認 |
| 月1回 | 氷水0℃・沸騰水100℃で校正確認 |
| 高温測定後 | 熱電対先端の酸化被膜を軽く拭き取る |

---

## トラブルシューティング

| 症状 | 確認箇所 |
|---|---|
| Temp: nan が表示される | 配線を確認（特に VCC, GND, MISO） |
| 温度がマイナス表示 | 熱電対の極性が逆。T+/T- を入れ替える |
| Temp: -999.99 | 熱電対が未接続 |
| 温度の変化が遅い | フィルタ係数の調整が必要（detailed_spec_sw.md の「カスタマイズ」を参照） |
| Proto Module が認識されない | スタック接続のピンを全て確認。一度外して再度挿し直す |
