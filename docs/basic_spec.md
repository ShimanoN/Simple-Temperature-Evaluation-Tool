# 簡易温度評価ツール - 基本仕様書

**プロジェクト**: 温度評価ツール Phase 1  
**開発環境**: PlatformIO (VSCode拡張)     
**バージョン**: v3.0 (リファクタリング版)

---

## このドキュメントの役割

プロジェクト全体の構成・購入部品・開発フローをまとめたサマリー。  
詳細な手順は以下を参照:

| ドキュメント                   | 内容                           |
| ------------------------ | ---------------------------- |
| **basic_spec.md**（本ファイル） | 全体把握・購入部品・開発環境概要             |
| **detailed_spec_hw.md**  | ハードウェア: 組み立て・配線・現場運用・保守      |
| **detailed_spec_sw.md**  | ソフトウェア: 環境構築・コード構成・書き込み・動作確認 |
| **future_plan.md**       | Phase 2 以降の拡張計画              |

---

## プロジェクト概要

M5Stack Basic V2.7 + K型熱電対による簡易温度計測ツール。  
生産現場（チャンバー・金型・槽）の温度を計測し平均値を表示。

**測定範囲**: -200〜1350℃（K型熱電対使用時）  
**想定用途**: 540℃チャンバー測定（目標600℃対応）  
**Phase 1 機能**: リアルタイム温度表示・計測開始/停止・平均値計算

---

## システム構成

```
[K型熱電対 600℃対応]
    │
    └─ T+/T- 端子（ねじ止め）
          │
    [MAX31855モジュール]
    （オスピンヘッダ付き完成品）
          │
          └─ SPI通信 5線
                │
          オス-メス ジャンパワイヤ
                │
          [Proto Module]
          （メスピン穴）
                │
                └─ スタック接続
                      │
                [M5Stack Basic V2.7]
                      │
                   LCD表示
                   BtnA操作
```

**動作**: M5Stack の画面で温度をリアルタイム表示、BtnA で計測開始・停止・結果確認

---

## 購入部品リスト

総額: **約16,082円**

| No.    | 部品名                  | 型番/仕様              | 単価           | 購入先    |
|:------:| -------------------- | ------------------ | ------------:| ------ |
| 1      | M5Stack Basic V2.7   | M5Stack-BASIC-V2.7 | 7,990円       | Amazon |
| 2      | M5Stack Proto Module | 純正品                | 1,198円       | Amazon |
| 3      | MAX31855モジュール        | オスピンヘッダ付き完成品       | 904円         | Amazon |
| 4      | K型熱電対 600℃対応         | MSNDFL1.6-30-F2-Y  | 5,290円       | MISUMI |
| 5      | ジャンパワイヤ（オス-メス）       | 20cm 10本セット        | 700円         | Amazon |
| **合計** |                      |                    | **約16,082円** |        |

### 購入時の注意点

- **M5Stack Basic**: 必ず **V2.7** を購入（V2.6以前は画面仕様が異なる）
- **Proto Module**: **純正品**を選ぶ（互換品は接続不良の可能性あり）
- **MAX31855**: 「**オスピンヘッダ付き**」完成品を選ぶ（ハンダ付け不要）
  
      **注意**: モジュールによってはピン表記が `Vin` / `3VO` / `GND` / `DO` / `CS` / `CLK` のように異なります。信号名の対応は `DO`=MISO, `CLK`=SCK, `CS`=CS です。電源は基本的に **3.3V** を使用してください（誤って 5V を与えると破損する場合があります）。
- **ジャンパワイヤ**: 必ず「**オス-メス**」タイプを購入（メス-メスではない）
- **K型熱電対**: 測定対象温度に応じて選定（本仕様は600℃対応品）

### 必要な工具

- **ドライバー**（熱電対端子のねじ止め用）のみ

**ハンダごて・ハンダ・ニッパーは不要です**（全て完成品を使用）

---

## 開発環境

### ソフトウェア

- **VSCode** + **PlatformIO IDE** 拡張機能
- フレームワーク: Arduino (ESP32)
- ライブラリ: M5Stack, Adafruit MAX31855 library

詳細なセットアップ手順は `detailed_spec_sw.md` を参照。

### プロジェクト構成

```
temp_eval_tool/
├── platformio.ini          # PlatformIO設定ファイル
├── include/
│   └── Global.h            # 定義・宣言（ピン・定数・構造体）
├── src/
│   ├── main.cpp            # setup/loop処理
│   └── Tasks.cpp           # IO/Logic/UI層の実装
└── docs/
    ├── basic_spec.md       # 本ファイル
    ├── detailed_spec_hw.md # ハードウェア仕様
    ├── detailed_spec_sw.md # ソフトウェア仕様
    └── future_plan.md      # 拡張計画
```

---

## 開発フロー

```
1. 部品購入
      ↓
2. ハードウェア組み立て      → detailed_spec_hw.md
   （配線・スタッキング・接続確認）
      ↓
3. 開発環境セットアップ      → detailed_spec_sw.md
   （PlatformIO・ライブラリ）
      ↓
4. コード書き込み            → detailed_spec_sw.md
   （Build & Upload）
      ↓
5. 動作確認                  → detailed_spec_sw.md
   （起動・状態遷移・平均値計算）
      ↓
6. 精度確認                  → detailed_spec_hw.md
   （温度計との比較・応答性確認）
      ↓
7. 現場運用                  → detailed_spec_hw.md
   （測定手順・安全対策）
```

---

## アーキテクチャ概要

### 3層タスク構成

| タスク名           | 周期    | 役割                 |
| -------------- | ----- | ------------------ |
| **IO_Task**    | 10ms  | センサ読取・フィルタ処理・ボタン入力 |
| **Logic_Task** | 50ms  | 状態遷移・積算演算・平均値計算    |
| **UI_Task**    | 200ms | LCD画面描画            |

### 状態遷移

```
[IDLE] ──BtnA──> [RUN] ──BtnA──> [RESULT] ──BtnA──> [IDLE]
  待機              計測中            平均値表示
```

詳細は `detailed_spec_sw.md` の「技術資料」を参照。

---

## 次のステップ

1. **部品を購入**したら → `detailed_spec_hw.md` で組み立て
2. **組み立て完了**したら → `detailed_spec_sw.md` で環境構築・書き込み
3. **動作確認完了**したら → `detailed_spec_hw.md` で現場運用開始
4. **拡張機能が必要**なら → `future_plan.md` で Phase 2 計画を確認

---

**作成**: Shimano 
**最終更新**: 2026年2月4日
