# 簡易温度評価ツール - 詳細仕様書（ハードウェア編）

**参照元**: basic_spec.md  
**関連**: detailed_spec_sw.md（開発環境・書き込み）

---

## 組み立て手順

**所要時間**: 約15分  
**必要な工具**: ドライバーのみ（ハンダ付け不要）

### ステップ1: 配線作業

Proto Module と MAX31855モジュールを オス-メスジャンパワイヤで接続します。

**接続表**

| Proto Module<br>（メスピン穴） | ワイヤ色<br>（推奨） | MAX31855<br>（オスピン） | 役割      |
| ----------------------- |:------------:| ------------------ | ------- |
| GND                     | 黒            | GND                | グランド    |
| 3.3V                    | 赤            | VCC                | 電源      |
| GPIO23                  | 青/緑/黄        | SO (MISO)          | データ受信   |
| GPIO18                  | 青/緑/黄        | SCK                | クロック    |
| GPIO5                   | 青/緑/黄        | CS                 | チップセレクト |

**手順**

1. オス-メス ジャンパワイヤを5本用意
2. **GND同士を接続**（黒色推奨、最初に接続すると静電気対策になる）
3. Proto Module の **3.3V** ↔ MAX31855 の **VCC** を接続（赤色推奨）
4. **GPIO23** ↔ **SO(MISO)** を接続
5. **GPIO18** ↔ **SCK** を接続
6. **GPIO5** ↔ **CS** を接続
7. 全接続を目視確認（特にVCCとGNDの極性）

**⚠️ 重要: 配線時の注意事項**

- MAX31855 の VCC は **必ず 3.3V** に接続（**5Vを接続すると故障します**）
- GND を最初に接続すると静電気による破損を防げます
- 配線の色分けを推奨: GND=黒、VCC=赤、信号線=その他の色

---

### ステップ2: K型熱電対の接続

1. 熱電対のリード線の色を確認（**赤=+、青または黄=-**）
2. MAX31855 の **T+** 端子に**赤リード線**を接続
   - ねじ端子の場合はドライバーで締める
3. MAX31855 の **T-** 端子に**青/黄リード線**を接続
4. **引っ張っても抜けないこと**を確認

**💡 ヒント**

熱電対の極性を逆にすると温度がマイナス表示になります。  
初回起動時の温度表示で気づけるので、まず接続してみてください。

---

### ステップ3: モジュールのスタッキング

1. **M5Stack Basic の USBケーブルを抜く**（電源OFF）
2. Proto Module を M5Stack 本体の**上部にゆっくり重ねる**
3. **ピンが全て正しく挿入されているか**確認
4. **カチッと音がするまで**押し込む

---

### ステップ4: 組み立て完了確認

以下を確認してください:

- [ ] 全モジュールがしっかり接続されている（目視）
- [ ] 配線に断線・短絡がない
- [ ] 熱電対が MAX31855 に正しく接続されている
- [ ] USBケーブルを接続し電源を投入
- [ ] 画面に「**M5Stack**」ロゴが表示される

**注意**: この時点ではプログラムは未書き込みです。ロゴ表示のみ確認してください。

---

## 配線概略図

```
[M5Stack Basic V2.7]
         │
         │ スタック接続
         ↓
[Proto Module]
  │  │  │  │  │
  │  │  │  │  └─ GPIO5  ──オス-メス──> CS      ┐
  │  │  │  └──── GPIO18 ──オス-メス──> SCK     │
  │  │  └─────── GPIO23 ──オス-メス──> SO/MISO │ [MAX31855]
  │  └────────── 3.3V   ──オス-メス──> VCC     │  (オスピン)
  └─────────────  GND    ──オス-メス──> GND     ┘
                                          │
                                          │ T+/T- 端子
                                          ↓
                                   [K型熱電対 600℃]
```

---

## 精度確認

プログラム書き込み完了後に以下で確認してください。

### 1. 室温での安定性確認

1. 熱電対を室温環境に置く
2. **5分以上待って温度が安定**することを確認
3. 市販の温度計と比較し、**誤差が ±2℃ 以内**であることを確認

### 2. 温度変化への追従性確認

1. お湯（60〜80℃程度）を準備（**火傷注意**）
2. 熱電対をお湯に入れて**温度が上昇する**ことを確認
3. お湯から出して**温度が下降する**ことを確認

温度変化への追従性が確認できればOKです。

---

## 現場運用ガイド

### 測定手順（標準作業）

1. 熱電対を測定対象（チャンバー・金型・槽・ヒーター等）に**確実に接触**させる
2. 温度表示が安定するまで**10秒以上待つ**（急激な温度変化が落ち着くのを待つ）
3. **BtnA（左ボタン）を押す** → STATE: RUN に遷移
4. 測定したい時間待つ（**推奨: 30秒以上**）
5. **BtnA を押す** → STATE: RESULT に遷移、平均値が表示される
6. 表示された**平均値を記録**（紙またはPC入力）
7. **BtnA を押す** → STATE: IDLE に戻る
8. 次の測定箇所へ移動

---

### 測定時の注意事項

#### 基本的な注意

- **熱電対は測定対象に確実に接触させる**（空気層があると誤差が大きくなる）
- **温度が安定してから計測開始**（急激な温度変化中は避ける）
- **最低30秒以上計測を続ける**（サンプル数600以上で統計的に安定）
- M5Stack本体は**高温環境（50℃以上）に長時間置かない**

#### 高温測定時の配慮

- 測定対象が540℃の場合、**熱電対ケーブル長（30cm）を活かして本体と十分に距離を取る**
- 熱電対の極性（+/-）を間違えると温度が反転表示されます。**初回測定時に必ず確認**してください

---

### 高温測定時の安全対策（540℃チャンバー対応）

本ツールはチャンバー温度540℃（目標600℃対応）での使用を想定しています。

#### 安全対策

- **熱電対の先端のみをチャンバー内に挿入**、M5Stack本体はチャンバー外に設置
- 熱電対ケーブルが**チャンバー壁面や高温部に接触しないよう**配線経路を確保
- 測定中は熱電対ケーブルに**手を触れない**（ケーブル表面も高温になる可能性あり）
- **長時間測定（10分以上）**の場合、M5Stack本体の温度上昇に注意
  - 本体温度が**40℃を超えたら休止**
- **測定終了後**、熱電対を取り出す際は**耐熱手袋を着用**すること

---

## 保守・メンテナンス

| 頻度        | 内容                           |
| --------- | ---------------------------- |
| **使用毎**   | 画面に「nan」や「ERROR」が表示されていないか確認 |
| **週1回**   | 配線の断線・接触不良を目視確認              |
| **月1回**   | 熱電対の接点の酸化・劣化を確認              |
| **月1回**   | 氷水0℃・沸騰水100℃で校正確認            |
| **高温測定後** | 熱電対先端の酸化被膜を軽く拭き取る（必要に応じて）    |

---

## トラブルシューティング

| 症状                       | 原因          | 対処方法                               |
| ------------------------ | ----------- | ---------------------------------- |
| **Temp: nan** と表示される     | 配線不良        | 配線を確認（特に VCC, GND, MISO）           |
| **温度がマイナス表示**            | 熱電対の極性が逆    | T+/T- を入れ替える                       |
| **Temp: -999.99**        | 熱電対が未接続     | 熱電対の端子接続を確認                        |
| **温度の変化が遅い**             | フィルタ係数が強すぎる | `detailed_spec_sw.md` の「カスタマイズ」を参照 |
| **Proto Module が認識されない** | スタック接続不良    | ピンを全て確認。一度外して再度挿し直す                |
| **画面が真っ暗**               | プログラム書き込み失敗 | `detailed_spec_sw.md` を参照して再書き込み   |

---

## よくある質問（FAQ）

### Q1. 温度が「nan」と表示される

**A1.** MAX31855が正しく接続されていません。配線（特にVCC, GND, MISO）を確認してください。

### Q2. 温度がマイナス表示される

**A2.** 熱電対の極性が逆です。T+/T-を入れ替えてください。

### Q3. 温度の変化が遅い

**A3.** フィルタ係数を調整してください（`detailed_spec_sw.md` のカスタマイズガイド参照）。

### Q4. 540℃のチャンバー測定で注意することは？

**A4.** M5Stack本体は必ずチャンバー外に設置し、熱電対ケーブル長（30cm）を活用してください。測定後は耐熱手袋を着用して熱電対を取り出してください。

### Q5. Proto Module が正しく認識されない

**A5.** スタック接続のピンが全て挿入されているか確認してください。一度外して再度挿し直してください。

---

**作成**: Shimano
**最終更新**: 2026年2月4日
